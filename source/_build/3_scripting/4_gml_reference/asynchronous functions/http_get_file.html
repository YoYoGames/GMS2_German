<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>http_get_file</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href="../../../../../files/helpindex.css"
type="text/css">
<link rel="stylesheet" href="../../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/4_gml_reference/asynchronous functions/http_get_file.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fasynchronous%20functions%2Fhttp_get_file.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fasynchronous%20functions%2Fhttp_get_file.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! --><script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script><h2> http_get_file </h2><div class="body-scroll"><p><br></p><h3> Beschreibung </h3><blockquote><p> Mit dieser Funktion können Sie eine Verbindung zur angegebenen URL herstellen, um Informationen in Form einer Datei abzurufen. Da dies eine asynchrone Funktion ist, blockiert <i><span class="notranslate">GameMaker Studio 2</span></i> nicht, während auf eine Antwort gewartet wird, sondern läuft weiter, es sei denn, es werden Rückrufinformationen erhalten. Diese Informationen haben die Form einer Zeichenfolge und lösen ein <b>asynchrones Ereignis</b> in einer Instanz aus, für die in ihren Objekteigenschaften eine definiert ist. </p><p> Dieses Ereignis wird einen &quot;Rückruf&quot; generieren, der von irgendwelchen <a href=
"../../../2_interface/1_editors/events/async_events.html">HTTP-Ereignissen empfangen wird</a>, in welchem ​​Fall er ein erzeugt <a href=
"../data_structures/ds%20maps/index.html"><tt>ds_map</tt></a> (besser bekannt als &quot;Wörterbuch&quot;), das exklusiv für dieses Ereignis ist und in der speziellen Variablen <b>async_load</b> gespeichert ist. Diese ds_map enthält verschiedene Werte, abhängig von den zurückgegebenen Daten, dh: Das Ereignis wird mehrfach ausgelöst, wenn jedes Datenpaket empfangen wird, so dass Sie beispielsweise einen Fortschrittsbalken anzeigen können. Die allgemeine Struktur für die ds_map lautet wie folgt: </p><blockquote><ol><li> <b>ID:</b> Die ID, die vom Befehl zurückgegeben wurde. Wenn Sie eine Reihe von abfeuern <tt>http_</tt> Anfragen, dann müssen Sie wissen, auf welche Sie die Antwort bekommen, und so würden Sie diesen Wert verwenden, um mit dem Wert zu vergleichen, den Sie speicherten, als Sie ursprünglich die Anfrage schickten, um die richtige zu finden. </li><li style="list-style: none"><br></li><li> <b>status:</b> Gibt einen Wert von weniger als 0 für einen Fehler zurück, 0 für den Abschluss und 1 für den Empfang von Paketen (siehe unten für weitere Details). </li><li style="list-style: none"><br></li><li> <b>Ergebnis:</b> Die empfangenen Daten (nur String). </li><li style="list-style: none"><br></li><li> <b>URL:</b> Die vollständige URL, die Sie angefordert haben. </li><li style="list-style: none"><br></li><li> <b>http_status:</b> Der rohe http-Statuscode (falls verfügbar). Dadurch wird der Standard-Webstatuscode für die meisten Browser zurückgegeben, z. B.: 304 für &quot;Nicht geändert&quot; oder 204 für &quot;Kein Inhalt&quot; usw. </li><li style="list-style: none"><br></li></ol></blockquote><p> Wenn mehrere Pakete an Ihr Spiel zurückgegeben werden, gibt der Callback-Statusschlüssel 1 zurück. In diesem Fall verfügt die ds_map über die folgenden zusätzlichen Schlüssel: </p><blockquote><ol><li> <b>&quot;contentLength&quot;:</b> Dies ist die Größe der Datei, die der Webserver <b>erwartungsgemäß</b> erhalten sollte (kann -1 sein, wenn der Server diese Daten nicht <b>zurückgibt</b> ). </li><li style="list-style: none"><br></li><li> <b>&quot;sizeDownloaded&quot;:</b> Die Größe der Daten, die bereits heruntergeladen wurden. </li></ol></blockquote><div class="note"> <b>HINWEIS:</b> Sie sollten wissen, dass aufgrund von XSS-Schutz in Browsern Anforderungen an und Versuche, Ressourcen aus verschiedenen Domänen zu laden, blockiert werden und möglicherweise leere Ergebnisse zurückgeben. Weitere Informationen finden Sie im Abschnitt <a href="index.html">Domänenübergreifende Probleme</a>. </div></blockquote><p><br></p><h3> Syntax: </h3><p class="code">http_get_file(url, local_target);<span class="notranslate"></span></p><blockquote><table><tr><th> Streit </th><th> Beschreibung </th></tr><tr><td> <span class="notranslate">url</span> </td> <td> Die Webadresse des Servers, von dem die Datei abgerufen werden soll </td></tr><tr class="alt"><td> <span class="notranslate">local_target</span> </td> <td> Das Zielverzeichnis für den lokalen Speicherbereich, in dem die Datei gespeichert werden soll </td></tr></table></blockquote><p><br></p><h3> Kehrt zurück: </h3><p class="code">Real<span class="notranslate"></span></p><p><br></p><h3> Erweitertes Beispiel: </h3><blockquote><p> Das <tt>http_get_file</tt> Die Funktion kann von jedem beliebigen Ereignis aus aufgerufen werden, und da sie asynchron ist, kann der Rückruf fast sofort erfolgen oder mehrere Sekunden dauern. Der Aufruf der Funktion ist einfach und würde etwa so aussehen: </p></blockquote><p class="code">file =
http_get_file("http://www.macsweeneygames.com/downloads/upgrade.zip",
"\Downloads\Upgrade.zip");<span class="notranslate"></span></p><blockquote><p> Der obige Code fordert eine Datei von der angegebenen URL an und legt sie zum Herunterladen in den lokalen Speicherbereich im Verzeichnis &quot;Downloads&quot; mit dem angegebenen Dateinamen fest (dieser muss nicht mit dem Quelldateinamen identisch sein). Das <tt>async_load</tt> Der Kartenindex wird in der Variablen &quot;file&quot; gespeichert, so dass Sie im asynchronen Ereignis nach dem korrekten Rückruf suchen können. Wenn das Sicherungsverzeichnis nicht existiert, wird es erstellt. Das asynchrone Ereignis, das ausgelöst wird, wäre das <b>HTTP</b> -Unterereignis. In diesem Fall hätten Sie etwa Folgendes: </p></blockquote><p class="code">if ds_map_find_value(async_load, "id") == file<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;var status = ds_map_find_value(async_load,
"status");<br>
&nbsp;&nbsp;&nbsp;if status == 0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var path =
ds_map_find_value(async_load, "result");<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var files = zip_unzip(path,
"/NewContent/");<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if files &gt; 0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global.ExtraContent
= true;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><blockquote><p> Der obige Code überprüft zuerst die ID der erstellten ds_map und überprüft dann den Status des Callbacks. Wenn der Wert gleich 0 ist (Signalisierungserfolg), wird das Ergebnis des Callbacks zusammen mit dem Wert verwendet <a href=
"../file%20handling/zip_unzip.html"><tt>zip_unzip()</tt></a> Funktion zum Entpacken der heruntergeladenen Datei in das angegebene Verzeichnis. Wenn das Entpacken erfolgreich ist, wird eine globale Variable auf wahr gesetzt. </p></blockquote><p><br></p></div><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Zurück: <a href="index.html">Asynchrone Funktionen</a> </div><div style="float:right"> Weiter: <a href=
"http_post_string.html">http_post_string</a> </div></div></div><h5> © Urheberrecht <span class="notranslate">YoYo Games Ltd.</span> 2017 Alle Rechte vorbehalten </h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
